<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Lab 4 Map</title>

<link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>

<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }

.menu {
    position: absolute;
    background: white;
    padding: 10px;
    top: 10px;
    left: 10px;
    font-family: sans-serif;
    border-radius: 4px;
}
</style>
</head>

<body>

<div id="map"></div>

<div class="menu">
<label><input type="checkbox" id="layer1" checked> Tileset 1</label><br>
<label><input type="checkbox" id="layer2"> Tileset 2</label><br>
<label><input type="checkbox" id="layer3"> Tileset 3</label><br>
<label><input type="checkbox" id="layer4"> Tileset 4</label>
</div>

<script>

mapboxgl.accessToken = 'pk.eyJ1IjoiZ2lydW13IiwiYSI6ImNtaGNsMnczejI4a2cybXB1b3h6dHBuaHkifQ.fO5Cyk2RL57zq0RKG8BDkg';

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [-122.32, 47.61],
    zoom: 14
});

map.on('load', () => {

    const tilesets = [
        { id: 'layer1', path: 'assets/tileset_1_basemap/{z}/{x}/{y}.png' },
        { id: 'layer2', path: 'assets/tileset_2/{z}/{x}/{y}.png' },
        { id: 'layer3', path: 'assets/tileset_3/{z}/{x}/{y}.png' },
        { id: 'layer4', path: 'assets/tileset_4/{z}/{x}/{y}.png' }
    ];

    tilesets.forEach(ts => {
        map.addSource(ts.id, {
            type: 'raster',
            tiles: [ts.path],
            tileSize: 256
        });

        map.addLayer({
            id: ts.id,
            type: 'raster',
            source: ts.id,
            layout: {
                visibility: ts.id === 'layer1' ? 'visible' : 'none'
            }
        });

        document.getElementById(ts.id).addEventListener('change', e => {
            map.setLayoutProperty(
                ts.id,
                'visibility',
                e.target.checked ? 'visible' : 'none'
            );
        });
    });

});

</script>

</body>
</html>
