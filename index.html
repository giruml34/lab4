<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Lab 4 – UW Campus Tiles</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

  <style>
    html, body { margin:0; padding:0; height:100%; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
    .panel{
      position:absolute; top:12px; left:12px; z-index:1;
      background:rgba(255,255,255,.92); padding:12px;
      border-radius:10px; font-family:system-ui; max-width:320px;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
      font-size:12px;
    }
    .panel h1{ margin:0 0 8px; font-size:14px; }
    .panel label{ display:flex; gap:8px; align-items:center; margin:6px 0; cursor:pointer; }
  </style>
</head>
<body>
<div id="map"></div>

<div class="panel">
  <h1>Lab 4 – UW Campus Tiles</h1>
  <div>Toggle layers:</div>
  <label><input type="checkbox" id="t1" checked> Tileset 1 – Basemap</label>
  <label><input type="checkbox" id="t2"> Tileset 2 – Thematic</label>
  <label><input type="checkbox" id="t3"> Tileset 3 – Combined</label>
  <label><input type="checkbox" id="t4"> Tileset 4 – Theme Map</label>
</div>

<script>
  const blankStyle = {
    version: 8,
    sources: {},
    layers: [{ id: "background", type: "background", paint: { "background-color": "#f8f8f8" } }]
  };

  const map = new mapboxgl.Map({
    container: "map",
    style: blankStyle,
    center: [-122.305, 47.655], // UW
    zoom: 13
  });

  map.addControl(new mapboxgl.NavigationControl(), "top-right");
  map.addControl(new mapboxgl.ScaleControl({ maxWidth: 120, unit: "imperial" }));
  map.addControl(new mapboxgl.AttributionControl({ compact: true }));

  map.on("load", () => {
    const sources = [
      ["tileset-1", "assets/tileset_1/{z}/{x}/{y}.png", "layer-1", "visible"],
      ["tileset-2", "assets/tileset_2/{z}/{x}/{y}.png", "layer-2", "none"],
      ["tileset-3", "assets/tileset_3/{z}/{x}/{y}.png", "layer-3", "none"],
      ["tileset-4", "assets/tileset_4/{z}/{x}/{y}.png", "layer-4", "none"],
    ];

    for (const [srcId, path, layerId, vis] of sources) {
      map.addSource(srcId, { type: "raster", tiles: [path], tileSize: 256 });
      map.addLayer({ id: layerId, type: "raster", source: srcId, layout: { visibility: vis } });
    }

    function bindToggle(boxId, layerId) {
      document.getElementById(boxId).addEventListener("change", (e) => {
        map.setLayoutProperty(layerId, "visibility", e.target.checked ? "visible" : "none");
      });
    }
    bindToggle("t1", "layer-1");
    bindToggle("t2", "layer-2");
    bindToggle("t3", "layer-3");
    bindToggle("t4", "layer-4");
  });
</script>
</body>
</html>

